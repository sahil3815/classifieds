class L{constructor(){this.$=jQuery,this.filterWraperClass=".rtcl-widget-ajax-filter-wrapper",this.filterContainerClass=".rtcl-ajax-filter-wrap",this.filterTitleWrapClass=".rtcl-filter-title-wrap",this.resultWrapClass=".rtcl-ajax-filter-result-wrap",this.listingsContainerClass=".rtcl-ajax-listings",this.archivePaginationClass=".rtcl-pagination",this.noListingFoundClass=".no-listing-found",this.cfWrapperClass=".rtcl-ajax-filter-cf-wrap",this.options=this.$(this.filterWraperClass).data("options"),this.isTaxArchive=this.$("body").hasClass("tax-rtcl_category")||this.$("body").hasClass("tax-rtcl_location")||this.$("body").hasClass("tax-rtcl_tag"),this.isListingArchive=this.$("body").hasClass("post-type-archive-rtcl_listing"),this.isStoreSingle=this.$("body").hasClass("single-store"),this.isArchive=this.isListingArchive||this.isTaxArchive||this.isStoreSingle,this.store_id=this.$("body.single-store").find("#rtcl_store_id").val(),this.initLoading=!0,this.withOutFilterPrefix=["directory"],this.reset=!1,this.data={filterData:{...this.options,itemKeys:this.options?.items?.map(r=>r.id),initLoad:!0},params:{},is_listings:rtcl.is_listings,is_listing:rtcl.is_listing,listing_term:rtcl.listing_term,rtcl_store_id:this.store_id,activeTerms:rtcl.active_terms||[],hasMap:this.$(".rtcl-listings-sc-wrapper.has-map").length?1:"",action:"rtcl_ajax_filter_load_data",__rtcl_wpnonce:rtcl.__rtcl_wpnonce}}onLoadUpdateParams=()=>{const r=new URL(window.location.href);if(this.options?.items&&Array.isArray(this.options.items)){const f=this;this.options.items.map(s=>{if(s.id==="price_range"){if(r.searchParams.has("filter_price")){let c=decodeURI(r.searchParams.get("filter_price"));c.includes(",")&&(c=c.split(",")),this.data.params.filter_price=c}}else if(s.id==="radius_filter")r.searchParams.has("center_lat")&&(this.data.params.center_lat=r.searchParams.get("center_lat")),r.searchParams.has("center_lng")&&(this.data.params.center_lng=r.searchParams.get("center_lng")),r.searchParams.has("geo_address")&&(this.data.params.geo_address=r.searchParams.get("geo_address")),r.searchParams.has("distance")&&(this.data.params.distancem=r.searchParams.get("distance"));else if(f.withOutFilterPrefix.includes(s.id))r.searchParams.has(s.id)?this.data.params[s.id]=decodeURI(r.searchParams.get(s.id)).split(","):s.selected&&(f.initLoading=!1,this.data.params[s.id]=Array.isArray(s.selected)?s.selected:r.searchParams.get(s.selected).split(","),this.addParam(s.id,this.data.params[s.id],!0));else{let c=null;if(["location","category","tag"].includes(s.id)&&Array.isArray(rtcl.activeTerms)&&rtcl.activeTerms.length&&(c=rtcl.activeTerms.find(u=>u.taxonomy.replace("rtcl_","")===s.id))){const u="filter_"+s.id;let a;r.searchParams.has(u)?(a=decodeURI(r.searchParams.get(u)).split(","),a.push(c.term_id),this.addParam(u,c.term_id,!0)):(a=[c.term_id],this.addParam(u,c.term_id,!0)),this.data.params[u]=a}else{const u="filter_"+s.id;if(r.searchParams.has(u))this.data.params[u]=["checkbox","radio"].includes(s.type)?decodeURI(r.searchParams.get(u)).split(","):r.searchParams.get(u);else if(s.selected)f.initLoading=!1,["checkbox","radio"].includes(s.type)?(this.data.params[s.id]=Array.isArray(s.selected)?s.selected:r.searchParams.get(s.selected).split(","),this.addParam(s.id,this.data.params[s.id],!0)):(this.data.params[s.id]=r.searchParams.get(s.selected),this.addParam(s.id,this.data.params[s.id]));else if(s.id==="ad_type"&&r.searchParams.has("filters[ad_type]")){f.initLoading=!1;const a=r.searchParams.get("filters[ad_type]");this.data.params[u]=a,this.addParam(u,a)}}}})}r.searchParams.has("page")&&(this.data.params.page=r.searchParams.get("page")),r.searchParams.has("orderby")&&(this.data.params.orderby=r.searchParams.get("orderby")),r.searchParams.has("view")&&(this.data.params.view=r.searchParams.get("view")),r.searchParams.has("q")&&(this.data.params.q=r.searchParams.get("q")),Array.from(r.searchParams).map(([f,s])=>{f.startsWith("cf_")&&(s=decodeURI(r.searchParams.get(f)),s.includes(",")&&(s=s.split(",")),this.data.params[f]=s)}),this.renderActiveFilter()};init=()=>{this.$(this.filterWraperClass).length&&(this.onLoadUpdateParams(),this.handleEvents(),this.loadAjaxData(),this.priceRangeSliderInit(),this.radiusDistanceSliderInit(),this.dateInit(),this.loadInitData())};loadInitData=()=>{if(this.isArchive&&(this.$(this.archivePaginationClass).remove(),this.$(this.noListingFoundClass).remove()),this.isTaxArchive){const r=this.$("body").hasClass("tax-rtcl_category")?"rtcl-filter_category":this.$("body").hasClass("tax-rtcl_location")?"rtcl-filter_location":this.$("body").hasClass("tax-rtcl_tag")?"rtcl-filter_tag":"",f=this.$("body").find("."+r);if(f.length){const s=f.find(".rtcl-filter-content").data("options");if(s&&s.field_type==="checkbox"){const c=this.$('<div class="rtcl-show-all">'+rtclAjaxFilterObj.show_all+"</div>");c.on("click",u=>{window.location.replace(rtclAjaxFilterObj.listings_archive_url)}),f.append(c)}}}this.callAjax()};scrollToTop=()=>{if(this.$(this.filterContainerClass).hasClass("no-scroll-mode"))return!1;const r=this.$("body .rtclScrollTarget"),f=parseInt(rtclAjaxFilterObj.filter_scroll_offset,10),s=isNaN(f)?50:f;let c;r.length?c=r.offset().top-s:c=this.$(this.filterContainerClass).parent().offset().top-s,this.smoothScrollTo(c,1200)};handleEvents=()=>{this.$(this.filterContainerClass).on("click",".rtcl-reset",r=>{r.stopPropagation();const f=this.$(r.currentTarget),s=f.closest(".rtcl-ajax-filter-item"),c=s.find(".rtcl-filter-content"),u=c.data("options");s.hasClass("rtcl-filter_radius_filter")?(s.removeClass("is-active"),this.reset=!0,this.$(document).trigger("rtcl_ajax_filter_reset_radius_distance"),this.$(document).trigger("rtcl_ajax_filter_update_params")):s.hasClass("rtcl-filter_price_range")?(this.reset=!0,this.$(document).trigger("rtcl_ajax_filter_reset_price_range"),this.$(document).trigger("rtcl_ajax_filter_update_params")):s.hasClass("rtcl-filter_rating")?(s.removeClass("is-active"),c.find(".rtcl-filter-ratings-item").removeClass("selected"),this.removeParam(u.name),this.$(document).trigger("rtcl_ajax_filter_update_params")):(this.removeParam(u.name),s.removeClass("is-active"),c.find("input.rtcl-filter-number-field, input.rtcl-filter-date-field, input.rtcl-filter-text-field").val(""),this.$(document).trigger("rtcl_ajax_filter_update_params"))}).on("click keydown",".rtcl-more-less-btn",r=>{if(r.type==="keydown"&&r.key!=="Enter")return;const f=this.$(r.currentTarget),s=f.closest(".rtcl-ajax-filter-data");f.hasClass("active")?(s.find(".rtcl-ajax-filter-data-item.hideAble").removeClass("active"),f.removeClass("active")):(s.find(".rtcl-ajax-filter-data-item.hideAble").addClass("active"),f.addClass("active"))}).on("keydown",".rtcl-ajax-filter-data .rtcl-filter-checkbox-label",function(r){if(r.key==="Enter"){const f=this.getAttribute("for"),s=jQuery("#"+f);s.length&&s.trigger("click").trigger("change")}}).on("change","input.rtcl-filter-checkbox, select.rtcl-filter-select-item",this.handleFilter).on("click",".rtcl-filter-ratings-item",this.handleFilter).on("click keydown",".rtcl-ajax-filter-data.filter-list .is-parent.has-sub .rtcl-load-sub-list",r=>{r.type==="keydown"&&r.key!=="Enter"||this.loadSubListData(r)}),this.$(".rtcl-listings-actions .rtcl-view-switcher a.rtcl-view-trigger",document).on("click",r=>{r.preventDefault();const s=this.$(r.currentTarget).data("type")||"list";this.addParam("view",s),location.replace(location.href)}),this.$("body").off("change",".rtcl-ordering select.orderby"),this.$(".rtcl-listings-actions .rtcl-ordering select.orderby",document).off("change").on("change",r=>{const s=this.$(r.currentTarget).val();delete this.data.params.page,this.removeParam("page"),s?(this.data.params.orderby=s,this.addParam("orderby",s)):(delete this.data.params.orderby,this.removeParam("orderby")),this.$(document).trigger("rtcl_ajax_filter_update_params")}),this.$(document).on("keydown",".rtcl-ajax-pagination-container .rtcl-ajax-pagination-item.page-item:not(.active)",function(r){r.key==="Enter"&&jQuery(this).trigger("click")}),this.$(document).on("keyup",".rtcl-ajax-filter-item .rtcl-ajax-filter-text input[type=text]",this.handleFilter).on("keyup",".rtcl-ajax-filter-item .rtcl-filter-number-field-wrap input[type=number]",this.handleFilter).on("click",".rtcl-ajax-filter-text .rtcl-clear-text",r=>{const f=this.$(r.currentTarget),s=f.closest(".rtcl-ajax-filter-item"),c=f.closest(".rtcl-filter-content"),u=f.closest(".rtcl-ajax-filter-text").find("input[type=text]"),a=c.data("options");s.removeClass("is-active"),u.val("");const e=a.filter_key||a.name;e&&this.data.params[e]&&(delete this.data.params[e],this.$(document).trigger("rtcl_ajax_filter_update_params"))}).on("click",".rtcl-ajax-pagination-container .rtcl-ajax-pagination-item.page-item:not(.active)",this.handlePagination).on("click keydown",".rtcl-active-filters-container .rtcl-clear-filters",r=>{r.type==="keydown"&&r.key!=="Enter"||this.resetFilter(r)}).on("click keydown",".rtcl-active-filters-container .af-items .afi",r=>{r.type==="keydown"&&r.key!=="Enter"||this.removeFilterItem(r)}).on("click",this.filterTitleWrapClass,r=>{const f=this.$(r.currentTarget),s=f.closest(".rtcl-ajax-filter-item"),c=s.find(".rtcl-filter-content");s.hasClass("is-open")?c.slideUp(()=>{s.removeClass("is-open")}):c.slideDown(()=>{s.addClass("is-open")})}).on("rtcl_ajax_filter_update_params",(r,f)=>{delete this.data.params.page,this.removeParam("page"),this.callAjax()}).on("rtcl_ajax_filter_reset",()=>{this.reset=!0,this.$(this.filterContainerClass).find("input.rtcl-filter-checkbox").prop("checked",!1).end().find("select.rtcl-filter-select-item").val("").end().find("input.rtcl-filter-text-field").val("").closest(".rtcl-ajax-filter-item").removeClass("is-active").end().end().find(".rtcl-geo-address-field input").val("").closest(".rtcl-ajax-filter-item").removeClass("is-active").end().end().find(".rtcl-filter_rating").removeClass("is-active").find(".rtcl-filter-ratings .rtcl-filter-ratings-item").removeClass("selected"),this.$(".rtcl-filter-text-field",".rtcl-ajax-filter-date-field",document).val("").closest(".rtcl-ajax-filter-item").removeClass("is-active"),this.$(".rtcl-number-field-wrap input",document).val("").closest(".rtcl-ajax-filter-item").removeClass("is-active"),this.$(document).trigger("rtcl_ajax_filter_reset_price_range"),this.$(document).trigger("rtcl_ajax_filter_reset_radius_distance"),this.callAjax()}).on("rtcl_map_retrieve_geocode",(r,f)=>{if(f.target){const c=this.$(f.target).closest(".rtcl-filter_radius_filter"),u=c.find(".rtcl-radius-distance-slider");if(c.length&&u.length){const a=u[0].noUiSlider.get(),e=Number(a);this.data.params={...this.data.params,center_lat:f.lat,center_lng:f.lng,distance:e},this.addParam("center_lat",f.lat),this.addParam("center_lng",f.lng),this.addParam("distance",e),this.addParam("geo_address",f.address),c.addClass("is-active"),this.$(document).trigger("rtcl_ajax_filter_update_params",[this.data.params])}}})};loadSubListData=r=>{r.preventDefault();const f=jQuery(r.currentTarget),s=f.closest(".rtcl-ajax-filter-data-item"),c=f.closest(".rtcl-filter-content"),u=c.hasClass("rtcl-ajax"),a=c.data("options")||{},e=s.find("> .sub-list");s.hasClass("is-open")?e.slideUp(function(){s.removeClass("is-open")}):u&&a.taxonomy&&s.hasClass("has-sub")&&!s.hasClass("is-loaded")?c.hasClass("rtcl-loading")||(a.parent=s.data("id")||0,a.__rtcl_wpnonce=rtcl.__rtcl_wpnonce,a.action="rtcl_ajax_filter_get_sub_terms_html",this.$.ajax({url:rtcl.ajaxurl,type:"POST",dataType:"json",data:a,beforeSend:()=>{c.rtclBlock()},success:l=>{s.append(l.data),c.rtclUnblock(),s.addClass("is-open is-loaded"),s.find("> .sub-list").slideDown("slow",function(){jQuery(this).css("display","flex")})},complete:()=>{c.rtclUnblock()},error:(l,i,o)=>{console.error(o)}})):(e.slideDown(),s.addClass("is-open"))};loadAjaxData=()=>{this.$(this.filterContainerClass).find(".rtcl-ajax-filter-item .rtcl-filter-content.rtcl-ajax").each((r,f)=>{let s=this.$(f),c=s.data("options")||{};c.action="rtcl_ajax_filter_get_sub_terms_html",c.__rtcl_wpnonce=rtcl.__rtcl_wpnonce,rtcl.listing_term?.taxonomy===c.taxonomy&&Array.isArray(c.values)&&!c.values.includes(rtcl.listing_term.term_id.toString())&&c.values.push(rtcl.listing_term.term_id),this.$.ajax({url:rtcl.ajaxurl,type:"POST",dataType:"json",data:c,beforeSend:()=>{s.rtclBlock()},success:u=>{s.html(u.data).rtclUnblock(),s.closest(this.filterContainerClass)},complete:()=>{s.rtclUnblock()},error:(u,a,e)=>{s.rtclUnblock(),a===500?console.error("Error while adding comment"):a==="timeout"&&console.error("Error: Server doesn't respond.")}})})};addParam=(r,f,s)=>{if(!r)return;if(!f){this.removeParam(r);return}const c=new URL(window.location.href);let u=f;if(c.searchParams.has(r)){let a=decodeURI(c.searchParams.get(r));s&&(u=Array.from(new Set(a.split(","))),u.push(f))}this.data.params[r]=u,c.searchParams.set(r,Array.isArray(u)?u.join(","):u),window.history.pushState("",document.title,c.toString())};removeParam=(r,f,s)=>{if(!r)return;const c=new URL(window.location.href);if(!f||!s)delete this.data.params[r],c.searchParams.delete(r);else{let u=f;if(c.searchParams.has(r)){let a=decodeURI(c.searchParams.get(r));u=Array.from(new Set(a.split(","))).filter(e=>e.toString()!==f.toString()),u.length?(this.data.params[r]=u,c.searchParams.set(r,Array.isArray(u)?u.join(","):u)):(delete this.data.params[r],c.searchParams.delete(r))}}window.history.pushState("",document.title,c.toString())};handleFilter=(r,f)=>{if(this.reset)return;const s=this.$(r.currentTarget),c=s.closest(".rtcl-ajax-filter-item"),u=s.closest(".rtcl-filter-content"),a=u.data("options"),e=a.filter_key||a.name;if(r.type==="change"){if(e){const l=r.currentTarget.value;r.currentTarget.type==="text"?l?(this.data.params[e]=l,c.addClass("is-active"),this.addParam(e,l)):(delete this.data.params[e],c.removeClass("is-active"),this.removeParam(e)):a&&["checkbox","radio","select"].includes(a.field_type)?r.currentTarget.checked?this.addParam(e,l,r.currentTarget.type==="checkbox"):a.field_type==="select"&&l?this.addParam(e,l):this.removeParam(e,l,r.currentTarget.type==="checkbox"):this.addParam(e,l),this.$(document).trigger("rtcl_ajax_filter_update_params")}}else if(r.type==="keyup"){if(r.currentTarget.tagName==="INPUT")if(r.currentTarget.type==="number"&&c.find(".rtcl-filter-number-field-wrap").hasClass("min-max")){const i=this.$(r.currentTarget).closest(".rtcl-filter-number-field-wrap"),o=i.find("input.max").val()||null,g=i.find("input.min").val()||0;if(r.key==="Enter"||r.keyCode===13){const m=[g,o];this.data.params[e]=m,this.addParam(e,m),this.$(document).trigger("rtcl_ajax_filter_update_params")}else g||o?i.addClass("is-active"):i.removeClass("is-active")}else{const l=r.currentTarget.value;r.key==="Enter"||r.keyCode===13?(this.data.params[e]=r.currentTarget.value,this.addParam(e,l),this.$(document).trigger("rtcl_ajax_filter_update_params")):l?c.addClass("is-active"):c.removeClass("is-active")}}else if(r.type==="click"){const l=this.$(r.currentTarget);if(l.hasClass("rtcl-filter-ratings-item")){const i=parseFloat(l.data("id"));isNaN(i)||(l.closest(".rtcl-filter-ratings").find(".rtcl-filter-ratings-item").removeClass("selected"),l.addClass("selected"),c.addClass("is-active"),this.addParam(e,i),this.$(document).trigger("rtcl_ajax_filter_update_params",[this.data.params]))}}};dateInit=()=>{this.$.fn.daterangepicker&&this.$(".rtcl-filter-date-field",this.$(this.filterWraperClass)).each((r,f)=>{let s=this.$(f),c=s.data("options")||{};c=rtclFilter.apply("dateRangePickerOptions",c),window.innerWidth<=767&&(c.opens=c.opens||"center",c.drops=c.drops||"auto",c.autoApply=c.autoApply??!1),Array.isArray(c.invalidDateList)&&c.invalidDateList.length&&(c.isInvalidDate=function(u){return c.invalidDateList.includes(u.format(c.locale.format))}),s.daterangepicker(c),c.autoUpdateInput===!1&&(s.on("apply.daterangepicker",(u,a)=>{const e=this.$(u.currentTarget),l=e.closest(".rtcl-ajax-filter-item"),i=e.closest(".rtcl-filter-content"),o=i.data("options"),g=o.name;let m;a.singleDatePicker?(m=a.startDate.format(a.locale.format),e.val(m)):(m=a.startDate.format(a.locale.format)+a.locale.separator+a.endDate.format(a.locale.format),e.val(m)),this.addParam(g,m),this.data.params[g]=m,l.addClass("is-active"),this.$(document).trigger("rtcl_ajax_filter_update_params")}),s.on("cancel.daterangepicker",(u,a)=>{this.$(u.currentTarget).val("")}))})};priceRangeSliderInit=()=>{const r=this.$(this.filterContainerClass+" .rtcl-price-range-wrap");if(!r.length)return!1;const f=r.closest(".rtcl-ajax-filter-item");r.each((s,c)=>{const u=this.$(c),a=u.find(".rtcl-price-range-slider"),e=a[0],l=u.find(".rtcl-range-slider-input-wrap"),i=l.find(".rtcl-range-slider-input.max"),o=l.find(".rtcl-range-slider-input.min"),g=parseInt(a.attr("data-max"),10)||5e4,m=parseInt(a.attr("data-min"),10)||0,w=parseInt(i.val(),10)||g,v=parseInt(o.val(),10)||m,d=parseInt(a.attr("data-step"),10)||1e3;noUiSlider.create(e,{range:{min:m,max:g},behaviour:"drag",connect:!0,start:[v,w],step:d}),e.noUiSlider.on("update",(h,p)=>{(p===0?o:i).val(Number(h[p]))}),e.noUiSlider.on("change",(h,p)=>{if(!this.reset){f.addClass("is-active");const _=[Number(h[0]),Number(h[1])];this.data.params={...this.data.params,filter_price:_},this.addParam("filter_price",_.filter(y=>y===0?!0:y).join(",")),this.$(document).trigger("rtcl_ajax_filter_update_params",[this.data.params])}}),this.$(document).on("rtcl_ajax_filter_reset_price_range",()=>{o.val(m).trigger("change"),i.val(g).trigger("change"),delete this.data.params.filter_price,this.removeParam("filter_price"),f.removeClass("is-active")});function n(h,p){const _=[null,null];_[h]=p,e.noUiSlider.set(_)}l.find(".rtcl-range-slider-input").on("change",h=>{let p=h.currentTarget.value;p=Number(p),p=parseInt(p,10);const _=this.$(h.currentTarget).hasClass("min")?0:1;n(_,p);let y=e.noUiSlider.get();if(!this.reset){const b=[Number(y[0]),Number(y[1])];this.data.params={...this.data.params,filter_price:b},this.addParam("filter_price",b.filter(x=>x).join(",")),this.$(document).trigger("rtcl_ajax_filter_update_params",[this.data.params])}}).on("keydown",function(h){let p=e.noUiSlider.get();const _=jQuery(this).hasClass("min")?0:1;let y=Number(p[_]);const b=e.noUiSlider.steps()[_];let x;switch(h.which){case 13:this.dirty&&(this.dirty=!1,this.trigger("change"));break;case 38:x=b[1],x===!1&&(x=1),x!==null&&(this.dirty=!0,n(_,y+x));break;case 40:x=b[0],x===!1&&(h=1),x!==null&&(this.dirty=!0,n(_,y-x))}}).on("blur",function(){this.dirty&&jQuery(this).trigger("change"),this.dirty=!1})})};radiusDistanceSliderInit=()=>{const r=this.$(this.filterContainerClass+" .rtcl-radius-distance-slider-wrap");if(!r.length)return!1;const f=r.closest(".rtcl-ajax-filter-item");r.each((s,c)=>{const u=this.$(c),a=u.find(".rtcl-radius-distance-slider"),e=a[0];u.find(".rtcl-radius-distance-input");const l=parseInt(a.attr("data-default"),10)||30,i=parseInt(a.attr("data-current"),10)||l,o=parseInt(a.attr("data-max"),10)||300,g=parseInt(a.attr("data-min"),10)||0,m=parseInt(a.attr("data-step"),10)||5;noUiSlider.create(e,{range:{min:g,max:o},behaviour:"drag",connect:[!0,!1],start:i,step:m}),e.noUiSlider.on("change",(w,v)=>{if(!this.reset&&this.data.params.center_lat&&this.data.params.center_lng){f.addClass("is-active");const d=Number(w[v]);this.data.params={...this.data.params,distance:d},this.addParam("distance",d),this.$(document).trigger("rtcl_ajax_filter_update_params",[this.data.params])}}),e.noUiSlider.on("update",(w,v)=>{const d=Number(w[v]);u.find(".rtcl-range-value").text(d)}),this.$(document).on("rtcl_ajax_filter_reset_radius_distance",()=>{delete this.data.params.distance,delete this.data.params.center_lat,delete this.data.params.center_lng,delete this.data.params.geo_address,this.removeParam("distance"),this.removeParam("center_lat"),this.removeParam("center_lng"),this.removeParam("geo_address"),f.find(".rtcl-geo-address-input").val(""),f.removeClass("is-active"),e.noUiSlider.set([l,null])})})};callAjax=()=>{const r=this.$(this.filterWraperClass),f=this.$(this.listingsContainerClass);this.$.ajax({type:"POST",url:rtcl.ajaxurl,data:this.data,beforeSend:()=>{r.rtclBlock(),f.rtclBlock()},success:s=>{s.success&&(this.data.params.page=s.data.pagination.current_page,this.renderData({...s.data,actionData:this.data}),delete this.data.filterData.initLoad)},error:(s,c,u)=>{console.error(u)},complete:()=>{r.rtclUnblock(),f.rtclUnblock(),this.reset=!1,this.initLoading=!1}})};removeFilterItem=r=>{const f=this.$(r.currentTarget),s=f.data("item-id"),c=f.data("filter-name"),u=f.data("filter-value"),a=this.withOutFilterPrefix.includes(s)?this.$(".rtcl-ajax-filter-item.rtcl-"+s):this.$(".rtcl-ajax-filter-item.rtcl-filter_"+s),e=a.find(".rtcl-filter-content"),l=e.data("options");if(!a.length)return;let i=!1;s==="price_range"?(this.removeParam("filter_price"),this.reset=!0,this.$(document).trigger("rtcl_ajax_filter_reset_price_range"),i=!0):s==="radius_filter"?(this.removeParam("distance"),this.removeParam("center_lat"),this.removeParam("center_lng"),this.removeParam("geo_address"),this.reset=!0,this.$(document).trigger("rtcl_ajax_filter_reset_radius_distance"),i=!0):s==="rating"?(this.removeParam(c),a.removeClass("is-active"),a.find(".rtcl-filter-ratings-item").removeClass("selected"),i=!0):l&&(["checkbox","radio"].includes(l.field_type)?(this.removeParam(c,u,!0),a.find('input[value="'+u+'"]').prop("checked",!1)):l.field_type==="number"?(this.removeParam(c),a.removeClass("is-active"),a.find("input.rtcl-filter-number-field").val("")):(this.removeParam(c),a.find('input[name="'+c+'"], select[name="'+c+'"]').val(""),a.removeClass("is-active")),i=!0),i&&(delete this.data.params.page,this.removeParam("page"),this.$(document).trigger("rtcl_ajax_filter_update_params"))};resetFilter=()=>{const r=this,f=this.data.params.view;this.data.params={},f&&(this.data.params.view=f);const s=new URL(window.location.href);this.options.items&&Array.isArray(this.options.items)&&this.options.items.map(c=>{if(c.id==="price_range")s.searchParams.delete("filter_price");else if(c.id==="radius_filter")s.searchParams.delete("center_lat"),s.searchParams.delete("center_lng"),s.searchParams.delete("geo_address"),s.searchParams.delete("distance");else{const u=r.withOutFilterPrefix.includes(c.id)?c.id:"filter_"+c.id;s.searchParams.delete(u)}}),s.searchParams.delete("page"),s.searchParams.delete("orderby"),s.searchParams.delete("q"),Array.from(s.searchParams).map(([c])=>{c.startsWith("cf_")&&s.searchParams.delete(c)}),window.history.pushState("",document.title,s.toString()),this.$(document).trigger("rtcl_ajax_filter_reset")};handlePagination=r=>{let f;r.target.tagName==="SPAN"?f=r.target.parentNode:f=r.target;const s=this.$(f).data("id")||1;this.data.params.page=s,this.addParam("page",s),this.scrollToTop(),this.callAjax()};renderData=r=>{this.renderActiveFilter(r.active_filters),this.renderCfFilterItems(r.cf_items),this.renderListings(r.listings),this.renderPagination(r.pagination),this.renderResultCount(r.pagination),this.$(document).trigger("rtcl_ajax_filter_after_render",[r])};renderListings=r=>{if(this.isArchive&&this.initLoading&&!this.$(this.resultWrapClass).length)return;let f=this.$(document).find(this.listingsContainerClass);!f.length&&this.$(this.resultWrapClass).length&&(f=this.$('<div class="rtcl-ajax-listings"></div>'),this.$(this.resultWrapClass).append(f)),r?f.removeClass("no-listing-found"):(f.addClass("no-listing-found"),r=this.$('<div class="rtcl-info no-listing-found"></div>'),r.text(rtclAjaxFilterObj.no_result_found)),f.html(r)};renderCfFilterItems=r=>{if(this.initLoading)return;const f=this.$(this.cfWrapperClass);f.empty(),r&&Array.isArray(r)&&f.length&&(r.map(s=>{f.append(this.$(s.html))}),this.dateInit())};renderActiveFilter=r=>{const f=this.$('<div class="rtcl-active-filters-container"></div>');if(r&&Array.isArray(r)&&r.length){const c=this.$('<div class="rtcl-active-filters-wrap"></div>'),u=this.$('<div class="rtcl-active-filters"></div>');r.map(e=>{const l=this.$('<div class="rtcl-active-filter"><div class="af-name">'+e.label+'</div><div class="af-items"></div></div>');Object.keys(e.selected).map(i=>{const o=this.$('<div class="afi" tabindex="0" data-item-id="'+e.itemId+'" data-filter-name="'+e.id+'"  data-filter-value="'+i+'">'+e.selected[i]+'<span class="rtcl-remove-filter"><i class="remove-icon"></i></span></div>');l.find(".af-items").append(o)}),u.append(l)});const a=this.$('<div class="rtcl-clear-filters" tabindex="0"><span class="icon-wrap"><i class="rtcl-icon rtcl-icon-trash"></i></span><span>'+rtclAjaxFilterObj.clear_all_filter+"</span></div>");c.append(u,a),f.append(c)}const s=this.$(document).find(".rtcl-active-filters-container");s.length?s.replaceWith(f):this.$(this.listingsContainerClass).length?f.insertBefore(this.$(this.listingsContainerClass)):this.$(this.resultWrapClass).length&&f.insertBefore(this.$(this.resultWrapClass).find(".rtcl-listings"))};range=(r,f)=>{let s=f-r+1;return Array.from({length:s},(c,u)=>u+r)};getPageNumberArray=(r,f)=>{const s=f,c=1,u=c+5,a="...";if(u>=s)return this.range(1,s);const e=Math.max(r-c,1),l=Math.min(r+c,s),i=e>2,o=l<s-2,g=1,m=s;if(!i&&o){let w=3+2*c;return[...this.range(1,w),a,s]}if(i&&!o){let w=3+2*c,v=this.range(s-w+1,s);return[g,a,...v]}if(i&&o){let w=this.range(e,l);return[g,a,...w,a,m]}};renderPagination=r=>{const f=this.$('<div class="rtcl-ajax-pagination-container"></div>');if(r&&r.pages>1){const c=this.getPageNumberArray(r.current_page,r.pages),u=this.$('<div class="rtcl-ajax-pagination-wrap"></div>'),a=this.$('<ul class="rtcl-ajax-pagination"></ul>');c.map((e,l)=>{let i;e==="..."?i=this.$('<li class="rtcl-ajax-pagination-item dots"><span>&#8230;</span></li>'):(i=this.$('<li class="rtcl-ajax-pagination-item page-item" data-id="'+e+'"><span>'+e+"</span></li>"),e===r.current_page?i.addClass("active").attr("aria-current","page"):i.attr("tabindex","0")),a.append(i)}),u.append(a),f.append(u)}const s=this.$(document).find(".rtcl-ajax-pagination-container");s.length?s.replaceWith(f):this.$(this.listingsContainerClass).length?f.insertAfter(this.$(this.listingsContainerClass)):this.$(this.resultWrapClass).length&&f.insertAfter(this.$(this.resultWrapClass).find(this.listingsContainerClass))};renderResultCount=r=>{const f=this.$(".rtcl-listings-actions");if(!f.length)return;const s=f.find(".rtcl-result-count");if(s.attr("data-options",JSON.stringify({items:r.items})),!r.current_items||r.items<=r.per_page)s.text(rtclAjaxFilterObj.result_count.all.replace("%",r.items));else{const c=(r.current_page-1)*r.per_page;let u=`${c+1}â€“${c+r.current_items}`;s.text(rtclAjaxFilterObj.result_count.part.replace("_",u).replace("%",r.items))}};smoothScrollTo=(r,f)=>{const s=window.scrollY||window.pageYOffset,c="now"in window.performance?performance.now():new Date().getTime();function u(e){return e===0?0:e===1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2}function a(e){const l=e-c,i=Math.min(1,l/f),o=u(i);window.scrollTo(0,s+(r-s)*o),i<1&&requestAnimationFrame(a)}requestAnimationFrame(a)}}(function(t){t("body").on("init","#rating",function(){t(".single-rtcl_listing #rating").hide().before('<p class="stars"><span><a class="star-1" href="#">1</a><a class="star-2" href="#">2</a><a class="star-3" href="#">3</a><a class="star-4" href="#">4</a><a class="star-5" href="#">5</a></span></p>')}).on("click","#respond p.stars a",function(){var a=t(this),e=a.closest("#respond").find("#rating"),l=e.parent(".form-group"),i=a.closest(".stars");return e.val(a.text()),a.siblings("a").removeClass("active"),a.addClass("active"),i.addClass("selected"),l.removeClass("has-danger"),l.find(".with-errors").remove(),!1}).on("change",".rtcl-ordering select.orderby",function(){t(this).closest("form").submit()}).on("click",".rtcl-animate",function(a){a.preventDefault();const e=t(t(this).attr("href")).offset();t("html,body").stop().animate({scrollTop:e.top-120},500)}).on("input",".rtcl-password",function(){var a=t(this),e=a.val(),l=a.parent(),i=l.find(".rtcl-pass-strength-result"),o;if(i.length||(i=t('<div class="rtcl-pass-strength-result" />'),l.append(i)),i.removeClass("short bad good strong empty"),!e||e.trim()===""||e.trim().length<rtcl_validator.pw_min_length){i.addClass("empty").html("&nbsp;");return}switch(o=rtclCheckPasswordStrength(e),o){case-1:i.addClass("bad").html(rtcl_validator.pwsL10n.unknown);break;case 1:case 2:i.addClass("bad").html(rtcl_validator.pwsL10n.bad);break;case 3:case 4:i.addClass("good").html(rtcl_validator.pwsL10n.good);break;case 5:case 6:i.addClass("strong").html(rtcl_validator.pwsL10n.strong);break;default:i.addClass("short").html(rtcl_validator.pwsL10n.short)}}).on("click",".rtcl-toggle-pass",function(){const a=t(this),e=a.parent().find("input"),l=a.hasClass("rtcl-icon-eye-off");e.length&&(l?(e.attr("type","text"),a.removeClass("rtcl-icon-eye-off").addClass("rtcl-icon-eye")):(e.attr("type","password"),a.removeClass("rtcl-icon-eye").addClass("rtcl-icon-eye-off")))}).on("input focusout","#rtcl-reg-confirm-password",function(){const a=t(this);setTimeout(function(){let e=a.attr("aria-invalid")!==void 0&&a.attr("aria-invalid")!="true";a.closest(".confirm-password-wrap").find(".rtcl-checkmark").toggle(a.val().length>0&&e)},100)}).on("click",".rtcl-renew-btn",function(a){a.preventDefault();var e=t(this),l=e.data("id")||0;if(!l)return toastr.error(rtcl_store.lng.error),!1;var i=e.parents(".rtcl-listing-item");return confirm(rtcl.confirm_text)&&t.ajax({url:rtcl.ajaxurl,type:"POST",data:{listingId:l,__rtcl_wpnonce:rtcl.__rtcl_wpnonce,action:"rtcl_ajax_renew_listing"},beforeSend:function(){i.rtclBlock()},success:function(o){o.success?(e.slideUp(),i.find(".rtcl-status-wrap .rtcl-status").html(o.data.status),i.find(".rtcl-expire-wrap .rtcl-expire").html(o.data.expire_at),toastr.success(o.data.message)):toastr.error(o.data),i.rtclUnblock()},error:function(o){i.rtclUnblock(),toastr.error("Server Error.")}}),!1}),t("#rating").trigger("init"),t("#rtcl-toggle-filter-mobile").on("click",function(a){a.preventDefault(),t(this).closest(".rtcl-widget-filter-wrapper").find(".rtcl-widget-filter-class").toggle()}),t(document).on("click","#rtcl-resend-verify-link",function(a){if(a.preventDefault(),confirm(rtcl.re_send_confirm_text)){let e=t(this).data("login"),l=t(this).parent();t.ajax({url:rtcl.ajaxurl,data:{action:"rtcl_resend_verify",user_login:e,__rtcl_wpnonce:rtcl.__rtcl_wpnonce},type:"POST",dataType:"JSON",beforeSend:function(){l.rtclBlock()},success:function(i){l.rtclUnblock(),alert(i.data.message)},error:function(i){l.rtclUnblock(),alert("Server Error!!!")}})}return!1}),t(document).on("click",function(a){let e=t(".rtcl-ai-search-result-container");!e.is(a.target)&&e.has(a.target).length===0&&!t(a.target).closest(".rtcl-ai-quick-search").length&&e.slideUp(300)}),t(document).on("click",".rtcl-tab-nav li a",function(a){a.preventDefault();var e=t(this).data("target"),l=t(this).closest("li");l.addClass("active").siblings().removeClass("active"),t("#"+e).addClass("active").siblings(".rtcl-tab-pane").removeClass("active")}),t(document).on("click",".rtcl-ai-quick-search-inner",function(){let a=t(this),e=a.closest(".rtcl-ai-search-field"),l=e.next(".rtcl-ai-search-result-container"),i=e.find("input[name='q']").val(),o={action:"rtcl_ai_quick_search",__rtcl_wpnonce:rtcl.__rtcl_wpnonce,keyword:i};t.ajax({url:rtcl.ajaxurl,data:o,type:"POST",dataType:"JSON",beforeSend:function(){l.addClass("loading"),l.find(".rtcl-ai-search-result-header h4").text(rtcl.i18n.ai_quick_search_loading),l.find(".rtcl-ai-search-result-content").html(""),l.slideDown(250),a.css("cursor","wait")},success:function(g){a.css("cursor","pointer"),g.success?(l.find(".rtcl-ai-search-result-header h4").text(rtcl.i18n.ai_quick_search_heading+i),l.find(".rtcl-ai-search-result-content").html(g.data.html)):l.find(".rtcl-ai-search-result-header h4").text(g.data.message),l.removeClass("loading")},error:function(g){a.css("cursor","pointer"),l.removeClass("loading"),l.find(".rtcl-ai-search-result-header h4").text(g.errorText)}})}),t(document).on("click",".rtcl-payment-table-wrap .rtcl-payment-popup-link",function(a){a.preventDefault();let e=t(this),l=e.closest(".rtcl-payment-history-wrap"),i=l.find(".rtcl-popup-wrapper"),o=e.data("order-id"),g={action:"rtcl_payment_details_popup",__rtcl_wpnonce:rtcl.__rtcl_wpnonce,order_id:o};t.ajax({url:rtcl.ajaxurl,data:g,type:"POST",dataType:"JSON",beforeSend:function(){i.animate({opacity:0},10),i.removeClass("show")},success:function(m){m.success&&(i.find(".rtcl-popup-body").html(m.data.html),i.animate({opacity:1},300),i.addClass("show"))},error:function(m){console.log(m.errorText)}})}).on("click","#rtcl-report-abuse-modal-link",function(a){a.preventDefault();let e=t(this),l=e.closest(".single-listing-custom-fields-action"),i=l.find("#rtcl-report-abuse-modal");i.length&&(t("#rtcl-report-abuse-message").val(""),t("#rtcl-report-abuse-message-display").html(""),i.animate({opacity:1},300),i.addClass("show"))}).on("click",".rtcl-popup-close",function(a){a.preventDefault();let e=t(this).closest(".rtcl-popup-wrapper");e.animate({opacity:0},300),setTimeout(function(){e.removeClass("show")},500)}).on("click",".rtcl-MyAccount-open-menu",function(a){a.preventDefault();let e=t(this),l=t(".rtcl-MyAccount-navigation"),i=t(".rtcl-MyAccount-content");e.hasClass("sidebar-open")?(l.css("left","-225px"),i.find(".sidebar-menu-opened").remove()):(l.css("left","0"),i.prepend('<div class="sidebar-menu-opened"></div>')),e.toggleClass("sidebar-open")}).on("click",".rtcl-MyAccount-content .sidebar-menu-opened",function(a){let e=t(".rtcl-MyAccount-navigation"),l=t(".rtcl-MyAccount-open-menu");e.css("left","-225px"),t(this).remove(),l.removeClass("sidebar-open")}).on("click",".rtcl-ajax-filter-floating-mobile .rtcl-ajax-filter-open-filter",function(a){a.preventDefault();let e=t(this),l=e.closest(".rtcl-ajax-filter-floating-mobile"),i=l.closest(".rtcl-widget-ajax-filter-wrapper"),o=i.find(".rtcl-widget-ajax-filter-class"),g=t("body");i.hasClass("sidebar-filter-open")?(o.css("left","-265px"),g.find(".sidebar-ajax-filter-opened").remove()):(o.css("left","0"),g.prepend('<div class="sidebar-ajax-filter-opened"></div>')),i.toggleClass("sidebar-filter-open")}).on("click",".sidebar-ajax-filter-opened",function(a){a.preventDefault();let e=t(".rtcl-widget-ajax-filter-class"),l=t(".rtcl-widget-ajax-filter-wrapper");e.css("left","-265px"),t(this).remove(),l.removeClass("sidebar-filter-open")}).on("submit",".rtcl-my-listings-search-form form",function(a){a.preventDefault(),f()}).on("change","#rtcl-my-listings-directory",function(){f()}).on("change","#rtcl-my-listings-status",function(){f()}).on("click",".rtcl-my-listings-content .rtcl-pagination a",function(a){a.preventDefault();let e=t(this).html()||1;f(e)}).on("click",".rtcl-my-listing-table .rtcl-actions-wrap .actions-dot",function(a){t(".rtcl-my-listing-table").find(".rtcl-actions").removeClass("opened").addClass("closed"),t(this).closest(".rtcl-actions-wrap").find(".rtcl-actions").removeClass("closed").addClass("opened")}).on("click",function(a){t(a.target).closest(".rtcl-actions-wrap").find(".rtcl-actions").length===0&&t(".rtcl-my-listing-table").find(".rtcl-actions").removeClass("opened")}).on("click",".rtcl-my-listings-table-toggle-info",function(a){let e=t(this),l=e.closest("tr");l.find(".list-on-responsive").toggleClass("show"),l.find(".title-cell").toggleClass("showed-info")}),window.rtcl_make_checkout_request=function(a,e){let l=t(a),i=t("button[type=submit]",l),o=t("<div class='alert rtcl-response'></div>"),g=l.serialize();t.ajax({url:rtcl.ajaxurl,data:g,type:"POST",dataType:"JSON",beforeSend:function(){i.prop("disabled",!0),l.find(".alert.rtcl-response").remove(),l.rtclBlock()},success:function(m){i.prop("disabled",!1),l.rtclUnblock();let w="";m.success?(m.success_message.length&&m.success_message.map(function(v){w+="<p>"+v+"</p>"}),w&&o.removeClass("alert-danger").addClass("alert-success").html(w).appendTo(l)):(m.error_message.length&&m.error_message.map(function(v){w+="<p>"+v+"</p>"}),w&&o.removeClass("alert-success").addClass("alert-danger").html(w).appendTo(l)),typeof e=="function"?e(m):setTimeout(function(){m.redirect_url&&(window.location=m.redirect_url)},600)},error:function(m){i.prop("disabled",!1),l.rtclUnblock(),typeof e=="function"&&e(m)}})},window.rtcl_on_recaptcha_load=function(){if(rtcl.recaptcha&&rtcl.recaptcha.v===2){rtcl.recaptcha.response={};const a={sitekey:rtcl.recaptcha.site_key},e=t("form.rtcl-login-form, form#rtcl-login-form");e.length&&t.inArray("login",rtcl.recaptcha.on)!==-1&&e.each((m,w)=>{const v=t(w);v.data("reCaptchaId")||(v.find("#rtcl-login-g-recaptcha").length?v.data("reCaptchaId",grecaptcha.render(v.find("#rtcl-login-g-recaptcha")[0],a)):v.find(".rtcl-g-recaptcha-wrap").length&&v.data("reCaptchaId",grecaptcha.render(v.find(".rtcl-g-recaptcha-wrap")[0],a)))});const l=t("form#rtcl-register-form, form.rtcl-register-form");l.length&&t.inArray("registration",rtcl.recaptcha.on)!==-1&&l.each((m,w)=>{const v=t(w);v.data("reCaptchaId")||(v.find("#rtcl-registration-g-recaptcha").length?v.data("reCaptchaId",grecaptcha.render(v.find("#rtcl-registration-g-recaptcha")[0],a)):v.find(".rtcl-g-recaptcha-wrap").length&&v.data("reCaptchaId",grecaptcha.render(v.find(".rtcl-g-recaptcha-wrap")[0],a)))});const i=t("form#rtcl-post-form");i.length&&t.inArray("listing",rtcl.recaptcha.on)!==-1&&(i.data("reCaptchaId")||(i.find("#rtcl-listing-g-recaptcha").length?i.data("reCaptchaId",grecaptcha.render(i.find("#rtcl-listing-g-recaptcha")[0],a)):i.find(".rtcl-g-recaptcha-wrap").length&&i.data("reCaptchaId",grecaptcha.render(i.find(".rtcl-g-recaptcha-wrap")[0],a))));const o=t("form.rtcl-contact-form, form#rtcl-contact-form");o.length&&t.inArray("contact",rtcl.recaptcha.on)!==-1&&o.each((m,w)=>{const v=t(w);v.data("reCaptchaId")||(v.find("#rtcl-contact-g-recaptcha").length?v.data("reCaptchaId",grecaptcha.render(v.find("#rtcl-contact-g-recaptcha")[0],a)):v.find(".rtcl-g-recaptcha-wrap").length&&v.data("reCaptchaId",grecaptcha.render(v.find(".rtcl-g-recaptcha-wrap")[0],a)))});const g=t("form.rtcl-report-abuse-form, form#rtcl-report-abuse-form");g.length&&t.inArray("report_abuse",rtcl.recaptcha.on)!==-1&&g.each((m,w)=>{const v=t(w);v.data("reCaptchaId")||(v.find("#rtcl-report-abuse-g-recaptcha").length?v.data("reCaptchaId",grecaptcha.render(v.find("#rtcl-report-abuse-g-recaptcha")[0],a)):v.find(".rtcl-g-recaptcha-wrap").length&&v.data("reCaptchaId",grecaptcha.render(v.find(".rtcl-g-recaptcha-wrap")[0],a)))}),t(document).trigger("rtcl_recaptcha_loaded")}};function r(a){var e=decodeURIComponent(window.location.search.substring(1)),l=e.split("&"),i,o;for(o=0;o<l.length;o++)if(i=l[o].split("="),i[0]===a)return i[1]===void 0?!0:i[1]}function f(a=1){let e=t(".rtcl-my-listings-content"),l=t(".rtcl-my-listings-search-form form"),i=l.find('input[name="u"]').val(),o=t("#rtcl-my-listings-directory").val(),g=t("#rtcl-my-listings-status").val();t.ajax({url:rtcl.ajaxurl,type:"POST",data:{action:"rtcl_my_listings_search",search:i,directory:o,status:g,rtcl_my_listing_page:a,__rtcl_wpnonce:rtcl.__rtcl_wpnonce},beforeSend:function(){e.rtclBlock()},success:function(m){m.success&&e.html(m.data.html)},complete:function(){e.rtclUnblock()}})}function s(){t(".rtcl-equal-height").each(function(){var a=t(this),e=a.find(".equal-item");if(e.height("auto"),t(window).width()>767){var l=0;e.each(function(){var i=t(this).outerHeight();i>l&&(l=i)}),e.height(l+"px")}else e.height("auto")})}t(function(){t("#rtcl-reg-confirm-password").on("cut copy paste",function(d){d.preventDefault()}),t(".rtcl-delete-listing").on("click",function(d){if(d.preventDefault(),confirm(rtcl.confirm_text)){var n=t(this),h=n.closest("tr"),p={action:"rtcl_delete_listing",post_id:parseInt(n.attr("data-id"),10),__rtcl_wpnonce:rtcl.__rtcl_wpnonce};p.post_id&&t.ajax({url:rtcl.ajaxurl,data:p,type:"POST",beforeSend:function(){h.rtclBlock()},success:function(_){h.rtclUnblock(),_.success&&h.animate({height:0,opacity:0},"slow",function(){t(this).remove()})},error:function(){h.rtclUnblock()}})}return!1}),t(".rtcl-delete-favourite-listing").on("click",function(d){if(d.preventDefault(),confirm(rtcl.confirm_text)){const n=this,h=t(n),p={action:"rtcl_public_add_remove_favorites",post_id:parseInt(h.attr("data-id"),10),__rtcl_wpnonce:rtcl.__rtcl_wpnonce};p.post_id&&t.ajax({url:rtcl.ajaxurl,data:p,type:"POST",beforeSend:function(){t("<span class='rtcl-icon-spinner animate-spin'></span>").insertAfter(h)},success:function(_){_.target=n,h.next(".rtcl-icon-spinner").remove(),_.success?(h.closest("tr").animate({height:0,opacity:0},"slow",function(){t(this).remove()}),toastr.success(_.message)):toastr.error(_.message),t(document).trigger("rtcl.favorite",_)},error:function(_){t(document).trigger("rtcl.favorite.error",{action:"remove",post_id:p.post_id,target:n}),h.next(".rtcl-icon-spinner").remove()}})}return!1}),t("#rtcl-checkout-form").on("click",'input[name="pricing_id"]',function(d){t(this).data("price")+0===0?(t("#rtcl-billing-fields").slideUp(250),t("#rtcl-payment-methods").slideUp(250),t("#rtcl-checkout-store-gateway").slideDown(250)):(t("#rtcl-billing-fields").slideDown(250),t("#rtcl-payment-methods").slideDown(250),t("#rtcl-checkout-store-gateway").slideUp(250))}).on("change",'input[name="payment_method"]',function(d){var n=t("div.payment_box.payment_method_"+t(this).val());t(this).is(":checked")&&!n.is(":visible")&&(t("#rtcl-checkout-form div.payment_box").filter(":visible").slideUp(250),t(this).is(":checked")&&n.slideDown(250))}),t(".rtcl-media-upload-pp .rtcl-media-action").on("click","span.add",function(){const d=t(this),n=t("<input type='file' style='position:absolute;left:-9999px' />");t("body").append(n),navigator.userAgent.match(/MSIE ([0-9]+)\./)?n.trigger("change"):n.trigger("click"),n.on("change",function(){const h=t(this),p=d.parents(".rtcl-media-upload-pp"),_=t(".rtcl-media-item",p),y=new FormData,b=h[0].files[0],x=rtcl.image_allowed_type.map(function(k){return"image/"+k}),C=parseInt(rtcl.max_image_size);t.inArray(b.type,x)!==-1?b.size<=C?(y.append("pp",b),y.append("__rtcl_wpnonce",rtcl.__rtcl_wpnonce),y.append("action","rtcl_ajax_user_profile_picture_upload"),t.ajax({url:rtcl.ajaxurl,data:y,cache:!1,contentType:!1,processData:!1,type:"POST",beforeSend:function(){p.rtclBlock()},success:function(k){p.rtclUnblock(),k.error||(p.removeClass("no-media").addClass("has-media").parents(".rtcl-profile-picture-wrap").find(".rtcl-gravatar-wrap").hide(),_.html("<img class='rtcl-thumbnail' src='"+k.data.src+"'/>"))},error:function(k,P,j){p.rtclUnblock()}})):alert(rtcl.error_image_size):alert(rtcl.error_image_extension)})}).on("click","span.remove",function(){const n=t(this).parents(".rtcl-media-upload-pp"),h=t(".rtcl-media-item",n);confirm(rtcl.confirm_text)&&t.ajax({url:rtcl.ajaxurl,data:{action:"rtcl_ajax_user_profile_picture_delete",__rtcl_wpnonce:rtcl.__rtcl_wpnonce},type:"POST",beforeSend:function(){n.rtclBlock()},success:function(p){n.rtclUnblock(),p.error||(n.removeClass("has-media").addClass("no-media").parents(".rtcl-profile-picture-wrap").find(".rtcl-gravatar-wrap").show(),h.html(""))},error:function(p,_,y){n.rtclUnblock()}})}),t("#rtcl-change-password").on("change",function(){var d=t(this).is(":checked");d?t(".rtcl-password-fields").show().find('input[type="password"]').attr("disabled",!1):t(".rtcl-password-fields").hide().find('input[type="password"]').attr("disabled","disabled")}).trigger("change"),t(".rtcl-require-login").on("click",function(d){d.preventDefault(),alert(rtcl.user_login_alert_message)}),t(".rtcl-do-email").on("click","a",function(d){d.preventDefault();var n=t(this),h=n.parents(".rtcl-do-email");return t("#rtcl-contact-form",h).slideToggle("slow"),!1}),t(document).on("click","a.rtcl-favourites",function(d){d.preventDefault();const n=this,h=t(n),p=h.parent(),_={action:"rtcl_public_add_remove_favorites",post_id:parseInt(h.attr("data-id"),10),__rtcl_wpnonce:rtcl.__rtcl_wpnonce};_.post_id&&t.ajax({url:rtcl.ajaxurl,data:_,type:"POST",beforeSend:function(){t("<span class='rtcl-icon-spinner animate-spin'></span>").insertAfter(h),p.addClass("is-loading")},success:function(y){y.target=n,h.next(".rtcl-icon-spinner").remove(),y.success?(h.replaceWith(y.html),toastr.success(y.message)):toastr.error(y.message),t(document).trigger("rtcl.favorite",y),p.removeClass("is-loading")},error:function(y){t(document).trigger("rtcl.favorite.error",{action:"remove",post_id:_.post_id,target:n}),h.next(".rtcl-icon-spinner").remove(),p.removeClass("is-loading")}})});const a=function(d){this.$slider=d,this.slider=this.$slider.get(0),this.swiperSlider=this.slider.swiper||null,this.defaultOptions={breakpointsInverse:!0,observer:!0,navigation:{nextEl:this.$slider.find(".swiper-button-next").get(0),prevEl:this.$slider.find(".swiper-button-prev").get(0)}},this.slider_enabled=typeof Swiper=="function",this.options=Object.assign({},this.defaultOptions,this.$slider.data("options")||{}),this.initSlider=function(){this.slider_enabled&&(this.options.rtl&&this.$slider.attr("dir","rtl"),this.swiperSlider?(this.swiperSlider.parents=this.options,this.swiperSlider.update()):this.swiperSlider=new Swiper(this.$slider.get(0),this.options))},this.imagesLoaded=function(){const n=this;if(!t.isFunction(t.fn.imagesLoaded)||t.fn.imagesLoaded.done){this.$slider.trigger("rtcl_slider_loading",this),this.$slider.trigger("rtcl_slider_loaded",this);return}this.$slider.imagesLoaded().progress(function(h,p){n.$slider.trigger("rtcl_slider_loading",[n])}).done(function(h){n.$slider.trigger("rtcl_slider_loaded",[n])})},this.start=function(){const n=this;this.$slider.on("rtcl_slider_loaded",this.init.bind(this)),setTimeout(function(){n.imagesLoaded()},1)},this.init=function(){this.initSlider()},this.start()};t.fn.rtcl_slider=function(){return new a(this),this},t(".rtcl-carousel-slider").each(function(){t(this).rtcl_slider()}),t(".rtcl-terms").on("change","select",function(d){d.preventDefault();let n=t(this),h=n.data("taxonomy"),p=n.data("parent"),_=n.val(),y=n.find(":selected").attr("data-slug")||"",b=n.attr("class"),x=n.closest(".rtcl-terms").find("input.rtcl-term-hidden"),C=n.closest(".rtcl-terms").find("input.rtcl-term-hidden-value");if(x.val(_).attr("data-slug",y),C.val(y),n.parent().find("div:first").remove(),p!=_){n.parent().append('<div class="rtcl-spinner"><span class="rtcl-icon-spinner animate-spin"></span></div>');var k={action:"rtcl_child_dropdown_terms",taxonomy:h,parent:_,class:b,__rtcl_wpnonce:rtcl.__rtcl_wpnonce};t.post(rtcl.ajaxurl,k,function(P){n.parent().find("div:first").remove(),P.success&&n.parent().append(P.data)})}});const e={active:null,target:null,loc:{items:[],selected:null,parents:[],text:rtcl.location_text},cat:{items:[],selected:null,parents:[],text:rtcl.category_text}};t(".rtcl-widget-search-form .rtcl-search-input-category").on("click",function(){e.active="cat",e.target=t(this);const d=new RtclModal({footer:!1,wrapClass:"no-heading"});e.cat.items.length?(d.addModal(),d.content(o())):t.ajax({url:rtcl.ajaxurl,type:"POST",data:{action:"rtcl_get_all_cat_list_for_modal"},beforeSend:function(){d.addModal().addLoading()},success:function(n){d.removeLoading(),n.success&&(e.cat.items=n.categories,e.cat.selected=null,e.cat.parent=null,d.content(o()))},error:function(n){d.removeLoading(),d.content(rtcl_validator.server_error)}})}),t(".rtcl-widget-search-form .rtcl-search-input-location").on("click",function(){e.active="loc",e.target=t(this);const d=new RtclModal({footer:!1,wrapClass:"no-heading"});e.loc.items.length?(d.addModal(),d.content(o())):t.ajax({url:rtcl.ajaxurl,type:"POST",data:{action:"rtcl_get_all_location_list_for_modal"},beforeSend:function(){d.addModal().addLoading()},success:function(n){d.removeLoading(),n.success?(e.loc.items=n.locations,e.loc.selected=null,e.loc.parent=null,d.content(o())):d.content(rtcl_validator.server_error)},error:function(n){d.removeLoading(),d.content(rtcl_validator.server_error)}})});const l=t(".rtcl-widget-search-form .rtcl-autocomplete");t.fn.autocomplete&&l.length&&(l.autocomplete({minChars:2,search:function(d,n){t(d.target).parent().find(".rtcl-icon-spinner").length||(t("<span class='rtcl-icon-spinner animate-spin'></span>").insertAfter(d.target),t(d.target).closest(".rtcl-ai-search-field").length&&t("<div class='rtcl-ai-searching-data loading'><h4>"+rtcl.i18n.ai_quick_search_loading+"</h4></div>").insertAfter(d.target))},response:function(d,n){t(d.target).parent().find(".rtcl-icon-spinner").remove(),t(d.target).parent().find(".rtcl-ai-searching-data").remove()},source:function(n,h){n.location_slug=rtcl.rtcl_location||"",n.category_slug=rtcl.rtcl_category||"",n.type=t(this.element).data("type")||"listing",n.action="rtcl_inline_search_autocomplete",t.ajax({dataType:"json",type:"POST",url:rtcl.ajaxurl,data:n,success:h})},select:function(n,h){t(n.target).next("input").val(h.item.target).change()}}).data("ui-autocomplete")._renderItem=function(d,n){return t("<li />").data("item.autocomplete",n).append(n.label).appendTo(d)}),t(".rtcl-ajax-load").each(function(){let d=t(this),n=d.data("settings")||{};n.action="rtcl_ajax_taxonomy_filter_get_sub_level_html",n.__rtcl_wpnonce=rtcl.__rtcl_wpnonce,d.hasClass("have-query-var")?(n.query_var_location=d.attr("data-query-var-location"),n.query_var_category=d.attr("data-query-var-category"),n.query_var_tag=d.attr("data-query-var-tag")):(n.query_var_location="",n.query_var_category="",n.query_var_tag="");function h(y,b,x,C){var k=b.slice(0,C),P=k.pop();return k.reduce((j,S)=>j[S]=j[S]||{},y)[P]=x,y}var p=new URLSearchParams(decodeURIComponent(window.location.search));if(p.size){var _={};p.forEach(function(y,b){if(y&&b.startsWith("filters[")){var x=b.replace("filters","");if(x=x.replace(/^\[+/,""),x=x.replace(/]$/,""),x.includes("][")){var C=x.split("][");_=h(_,C,y)}else _[x]=y}}),Object.keys(_).length&&(n.filters=_)}t.ajax({url:rtcl.ajaxurl,type:"POST",dataType:"json",data:n,beforeSend:function(){d.rtclBlock()},success:function(y){d.html(y.data).rtclUnblock()},complete:function(){d.rtclUnblock()},error:function(y,b,x){if(d.rtclUnblock(),b===500)console.error("Error while adding comment");else if(b==="timeout")console.error("Error: Server doesn't respond.");else{var C=y.responseText.split("<p>"),k=C[1].split("</p>");console.error(k[0])}}})});function i(d,n){function h(_){return p.sub&&(p=p.sub),p.find(function(y){return _===y.id})}let p=n;if(d.length)for(let _=0;_<d.length;_++)p=h(d[_]);return p}function o(){const d=e.active,n=e[d].items,h=g(n),p=t('<div class="rtcl-ui-select-list-wrap"><h4>'+e[d].text+'</h4><div class="rtcl-select-action"></div><div class="rtcl-ui-select-list"></div></div>');return p.find(".rtcl-ui-select-list").append(h),p}function g(d){var n=t("<ul />");return d.forEach(function(h){var p=t('<a href="javascript:;" />'),_=t("<li />");h.hasOwnProperty("sub")&&_.addClass("has-sub"),h.hasOwnProperty("icon")&&p.html(h.icon),p.append(h.name),p.attr("data-item",JSON.stringify(m(h))),_.append(p),n.append(_)}),n}function m(d){let n=Object.assign({icon:"",sub:""},d);return delete n.icon,delete n.sub,n}t(document).on("click",".rtcl-ui-select-list li.has-sub a",function(d){d.preventDefault();let n=e.active,h=e[n].items,p=t(this),_=p.data("item"),y=p.parents(".rtcl-ui-select-list-wrap"),b=t(".rtcl-ui-select-list",y),x=t(".rtcl-select-action",y),C=t("h4",y),k=p.parents("ul"),P=parseInt(_.id,10),j;if(e[n].selected?(j=e[n].selected.sub.find(function(S){return S.id===P}),e[n].parent=e[n].selected.id):j=h.find(function(S){return S.id===P}),e[n].selected=j,j.parent&&e[n].parents.push(j.parent),j.hasOwnProperty("sub")&&j.sub.length){k.remove();const S=g(j.sub),U=rtcl.i18n.all_of_.replace("%s",j.name),T=t('<a href="javascript:;" />'),I=t("<li class='rtcl-ui-sl-all-of' />");j.hasOwnProperty("icon")&&T.html(j.icon),T.append(U);const D=JSON.parse(JSON.stringify(j));delete D.sub,T.attr("data-item",JSON.stringify(m(D)));const A=T.clone();if(I.append(T),S.prepend(I),b.html(S),C.find("span").length)C.find("span").html(A);else{const O=t('<span class="rtcl-icon-angle-right rtcl-selected-term-item" />').append(A);C.append(O)}x.html("<div class='go-back'>"+rtcl.i18n.go_back+"</div>")}}).on("click",".rtcl-select-action .go-back",function(d){d.preventDefault();let n=e.active,h=t(this),p=h.parents(".rtcl-ui-select-list-wrap"),_=t(".rtcl-ui-select-list",p),y=t("h4",p),b=t(".rtcl-select-action",p),x,C,k=0;if(e[n].parents.length?(C=i(e[n].parents,e[n].items),x=C.sub,e[n].parents.pop(),e[n].selected=C,k=1):(e[n].selected=null,x=e[n].items),_.html(""),_.append(g(x)),k){var P=t('<a href="javascript:;" />');if(P.append(C.name),P.attr("data-item",JSON.stringify(m(C))),y.find("span").length)y.find("span").html(P);else{var j=t('<span class="rtcl-icon-angle-right rtcl-selected-term-item" />').append(P);y.append(j)}}else y.find("span").remove(),b.find(".go-back").remove()}).on("click",".rtcl-ui-select-list li:not(.has-sub) a, .rtcl-selected-term-item a",function(d){d.preventDefault();let n=t(this),h=n.data("item")||null;return h&&e.target.length&&(e.target.find(".search-input-label").text(h.name),e.target.find("input.rtcl-term-field").val(h.slug).change(),t("body > .rtcl-ui-modal").remove(),t("body").removeClass("rtcl-modal-open"),rtcl.popup_search_widget_auto_form_submission&&e.target.closest("form").submit()),!1}).on("click",".ul-list-group.is-parent > ul > li > a",function(d){d.preventDefault();const n=t(this),h=n.parent("li"),p=h.parent("ul"),_=t(".col-md-6.sub-wrapper"),y=t("<li />"),b=h.find(".ul-list-group.is-sub").clone()||"",x=n.clone(),C=y.append(x);return b.find("ul").prepend(C),_.addClass("is-active"),_.html(b),p.find("> li").removeClass("is-active"),h.addClass("is-active"),!1}).on("click",".rtcl-filter-form .filter-list .is-parent.has-sub .arrow",function(d){d.preventDefault();const n=t(this),h=n.closest("li"),p=n.closest(".ui-accordion-content"),_=p.hasClass("rtcl-ajax-load"),y=p.data("settings")||{},b=h.find("> ul.sub-list");h.hasClass("is-open")?b.slideUp(function(){h.removeClass("is-open")}):_&&y.taxonomy&&h.hasClass("has-sub")&&!h.hasClass("is-loaded")?p.hasClass("rtcl-loading")||(y.parent=h.data("id")||-1,y.action="rtcl_ajax_taxonomy_filter_get_sub_level_html",t.ajax({url:rtcl.ajaxurl,type:"POST",dataType:"json",data:y,beforeSend:function(){p.rtclBlock()},success:function(x){h.append(x.data),p.rtclUnblock(),b.slideDown(),h.addClass("is-open is-loaded")},complete:function(){p.rtclUnblock()},error:function(x,C,k){if(p.rtclUnblock(),C===500)console.error("Error while adding comment");else if(C==="timeout")console.error("Error: Server doesn't respond.");else{var P=x.responseText.split("<p>"),j=P[1].split("</p>");console.error(j[0])}}})):(b.slideDown(),h.addClass("is-open"))}).on("click","ul.filter-list.is-collapsed li.is-opener, ul.sub-list.is-collapsed li.is-opener, ul.ui-link-tree.is-collapsed li.is-opener",function(){t(this).parent("ul").removeClass("is-collapsed").addClass("is-open")}).on("change",".rtcl-widget-search-form",function(){let d=t(this),n=d.find("[name='rtcl_location']").val(),h=d.find("[name='rtcl_category']").val(),p=rtcl.rtcl_listing_base;n&&h?(p=p+rtcl.rtcl_category_base+"/"+h+"/"+rtcl.rtcl_location_base+"/"+n,d.attr("action",p)):n?(p=p+rtcl.rtcl_location_base+"/"+n,d.attr("action",p)):(h&&(p=p+rtcl.rtcl_category_base+"/"+h),d.attr("action",p))}),t("#rtcl-checkout-form").on("change","#billing_country, #billing_state, input[name='pricing_id']",function(){var d=t(this),n=d.closest("#rtcl-checkout-form"),h=n.find("#billing_country").val(),p=n.find("#billing_state").val(),_=n.find("#billing_postcode").val(),y=n.find("#billing_city").val();rtcl.is_enable_tax&&u(h,p,_,y)}),t(".rtcl-filter-form .ui-accordion-item, .rtcl-ajax-filter-form .ui-accordion-item").on("click",".ui-accordion-title",function(){const d=t(this),n=d.parents(".ui-accordion-item"),h=t(".ui-accordion-content",n);n.hasClass("is-open")?h.slideUp(function(){n.removeClass("is-open")}):(h.slideDown(),n.addClass("is-open"))}),t(".rtcl-filter-form").on("click",".filter-submit-trigger",function(d){let n,h,p=t(this);p.is(":checkbox")||(d.preventDefault(),n=p.siblings("input"),h=n.prop("checked"),n.prop("checked",!h)),(p.is(":radio")||!p.is(":radio")&&p.siblings("input").is(":radio"))&&p.closest("form").submit()}),t(document).on("click keydown",".reveal-phone",function(d){if(d.type==="keydown"&&d.keyCode!==13)return;const n=t(this),h=n.hasClass("rtcl-mobile");if(n.hasClass("revealed")){if(h){const p=n.attr("data-tel");p&&(window.location=p)}}else{d.preventDefault();const p=n.data("options")||{},_=n.find(".numbers");let y="",b="";if(p.safe_phone&&p.phone_hidden){const x=p.safe_phone.replace(rtcl.phone_number_placeholder,p.phone_hidden);y=t('<a class="revealed-phone-number" href="#" />').attr("href","tel:"+x).html('<i class="rtcl-icon rtcl-icon-phone"></i>').append(x),n.attr("data-tel","tel:"+x)}if(p.safe_whatsapp_number&&p.whatsapp_hidden){const x=p.safe_whatsapp_number.replace(rtcl.phone_number_placeholder,p.whatsapp_hidden);b=t('<a class="revealed-whatsapp-number" href="#" />').attr("href","https://wa.me/"+x.replace(/\D/g,"").replace(/^0+/,"")+"/?text="+rtcl.wa_message).html('<i class="rtcl-icon rtcl-icon-whatsapp"></i>').append(x)}_.html(y).append(b),n.addClass("revealed"),t.ajax({url:rtcl.ajaxurl,type:"POST",dataType:"json",data:{listing_id:n.attr("data-id"),action:"rtcl_phone_whatsapp_revealed",__rtcl_wpnonce:rtcl.__rtcl_wpnonce},success:function(x){console.log(x)},error:function(x){console.log(x)}})}}),t(document).on("click",".reveal-phone.revealed a.revealed-phone-number",function(d){d.preventDefault();const n=t(this),h=n.closest(".reveal-phone.revealed");t.ajax({url:rtcl.ajaxurl,type:"POST",dataType:"json",data:{listing_id:h.attr("data-id"),action:"rtcl_phone_click",__rtcl_wpnonce:rtcl.__rtcl_wpnonce},success:function(p){p.success&&(window.location=n.attr("href"))},error:function(p){console.log(p)}})}),t(document).on("click",".reveal-phone.revealed a.revealed-whatsapp-number",function(d){d.preventDefault();const n=t(this),h=n.closest(".reveal-phone.revealed");t.ajax({url:rtcl.ajaxurl,type:"POST",dataType:"json",data:{listing_id:h.attr("data-id"),action:"rtcl_whatsapp_click",__rtcl_wpnonce:rtcl.__rtcl_wpnonce},success:function(p){p.success&&(window.location=n.attr("href"))},error:function(p){console.log(p)}})});let w=r("option")||"",v=r("gateway")||"";w?t("input[name='pricing_id'][value='"+w+"']").prop("checked",!0):t("input[name='pricing_id'][value='0']").prop("checked",!0),v&&t("label[for='gateway-"+v+"']").trigger("click"),rtclInitDateField()}),t.fn.validate&&(t("#rtcl-lost-password-form, #rtcl-password-reset-form").each(function(){t(this).validate()}),t("#rtcl-checkout-form").validate({submitHandler:function(a){return t(document.body).trigger("rtcl_before_checkout_request",[a]),rtcl_make_checkout_request(a),!1}}),t("form#rtcl-login-form, form.rtcl-login-form").each(function(){t(this).validate({submitHandler:function(a){const e=t(a);if(console.log(e.data("reCaptchaId")),rtcl.recaptcha&&typeof grecaptcha<"u"&&rtcl.recaptcha.on&&t.inArray("login",rtcl.recaptcha.on)!==-1){if(rtcl.recaptcha.v===2&&e.data("reCaptchaId")!==void 0){const i=grecaptcha.getResponse(e.data("reCaptchaId"));console.log(i);const o=e.find("#rtcl-login-g-recaptcha-message");return o.html(""),i.length===0?(o.addClass("text-danger").html(rtcl.recaptcha.msg.invalid),grecaptcha.reset(e.data("reCaptchaId")),!1):e.hasClass("rtcl-ajax-login")?(l(),!1):!0}else if(rtcl.recaptcha.v===3)return grecaptcha.ready(function(){e.rtclBlock(),grecaptcha.execute(rtcl.recaptcha.site_key,{action:"login"}).then(function(i){return e.hasClass("rtcl-ajax-login")?(l(i),!1):(e.append('<input type="hidden" id="g-recaptcha-response" name="g-recaptcha-response" value="'+i+'" />'),e.append('<input type="hidden" name="rtcl-login" value="login" />'),e.off("submit").trigger("submit"),!0)})}),!1}if(e.hasClass("rtcl-ajax-login"))return l(),!1;return!0;function l(i){const o=new FormData(a),g=o.get("username").trim(),m=o.get("password");o.delete("username"),o.delete("password"),o.set("username",rtclCipher(rtcl.__rtcl_wpnonce)(g)),o.set("password",rtclCipher(rtcl.__rtcl_wpnonce)(m)),i&&o.set("g-recaptcha-response",i),o.append("action","rtcl_login_request"),o.append("__rtcl_wpnonce",rtcl.__rtcl_wpnonce),t.ajax({url:rtcl.ajaxurl,type:"POST",dataType:"json",cache:!1,processData:!1,contentType:!1,data:o,beforeSend:function(){e.find(".rtcl-error").remove(),e.rtclBlock()},success:function(w){w.success?(toastr.success(w.data.message),e.append('<div class="rtcl-error alert alert-success" role="alert"><p>'+w.data.message+"</p></div>"),e[0].reset(),window.location.reload(!0)):(e.rtclUnblock(),toastr.error(w.data),e.append('<div class="rtcl-error alert alert-danger" role="alert"><p>'+w.data+"</p></div>"))},error:function(){e.rtclUnblock().append('<div class="rtcl-error alert alert-danger" role="alert"><p>'+rtcl_validator.messages.server_error+"</p></div>"),toastr.error(rtcl_validator.messages.server_error)}})}}})}),t("form#rtcl-register-form, form.rtcl-register-form").each(function(){t(this).validate({submitHandler:function(a){const e=t(a);if(rtcl.recaptcha&&typeof grecaptcha<"u"&&rtcl.recaptcha.on&&t.inArray("registration",rtcl.recaptcha.on)!==-1){if(rtcl.recaptcha.v===2&&e.data("reCaptchaId")!==void 0){const i=grecaptcha.getResponse(e.data("reCaptchaId")),o=t("#rtcl-registration-g-recaptcha-message");return o.html(""),i.length===0?(o.addClass("text-danger").html(rtcl.recaptcha.msg.invalid),grecaptcha.reset(e.data("reCaptchaId")),!1):e.hasClass("rtcl-ajax-registration")?(l(),!1):!0}else if(rtcl.recaptcha.v===3)return grecaptcha.ready(function(){e.rtclBlock(),grecaptcha.execute(rtcl.recaptcha.site_key,{action:"registration"}).then(function(i){return e.hasClass("rtcl-ajax-registration")?(l(i),!1):(e.append('<input type="hidden" id="g-recaptcha-response" name="g-recaptcha-response" value="'+i+'" />'),e.append('<input type="hidden" name="rtcl-register" value="register" />'),e.off("submit").trigger("submit"),!0)})}),!1}if(e.hasClass("rtcl-ajax-registration"))return l(),!1;return!0;function l(i){const o=new FormData(a);i&&o.append("g-recaptcha-response",i),o.append("action","rtcl_registration_request"),o.append("__rtcl_wpnonce",rtcl.__rtcl_wpnonce),t.ajax({url:rtcl.ajaxurl,type:"POST",dataType:"json",cache:!1,processData:!1,contentType:!1,data:o,beforeSend:function(){e.find(".rtcl-error").remove(),e.rtclBlock()},success:function(g){e.rtclUnblock(),g.success?(e.append('<div class="rtcl-error alert alert-success" role="alert"><p>'+g.data.message+"</p></div>"),e[0].reset(),g.data.redirect_url&&g.data.redirect_utl!==window.location.href&&(window.location=g.data.redirect_url+"?t="+new Date().getTime())):e.append('<div class="rtcl-error alert alert-danger" role="alert"><p>'+g.data+"</p></div>")},error:function(){e.rtclUnblock().append('<div class="rtcl-error alert alert-danger" role="alert"><p>'+rtcl_validator.messages.server_error+"</p></div>")}})}}})}),t("form.rtcl-report-abuse-form, form#rtcl-report-abuse-form").each(function(){t(this).validate({submitHandler:function(a){const e=t(a);if(rtcl.recaptcha&&typeof grecaptcha<"u"&&rtcl.recaptcha.on&&t.inArray("report_abuse",rtcl.recaptcha.on)!==-1){if(rtcl.recaptcha.v===2&&e.data("reCaptchaId")!==void 0){const i=grecaptcha.getResponse(e.data("reCaptchaId")),o=e.find("#rtcl-report-abuse-message-display");return o.html(""),i.length===0?(o.removeClass("text-success").addClass("text-danger").html(rtcl.recaptcha.msg.invalid),grecaptcha.reset(rtcl.recaptcha.response.report_abuse),!1):(l(i),!1)}else if(rtcl.recaptcha.v===3)return grecaptcha.ready(function(){grecaptcha.execute(rtcl.recaptcha.site_key,{action:"reportAbuse"}).then(function(i){l(i)})}),!1}return l(),!1;function l(i){const o=new FormData(a);o.append("action","rtcl_public_report_abuse"),o.append("post_id",rtcl.post_id||0),o.append("__rtcl_wpnonce",rtcl.__rtcl_wpnonce),i&&o.append("g-recaptcha-response",i);const g=e.find(".rtcl-btn.rtcl-btn-primary");t.ajax({url:rtcl.ajaxurl,data:o,dataType:"json",cache:!1,processData:!1,contentType:!1,type:"POST",beforeSend:function(){t('<span class="rtcl-icon-spinner animate-spin"></span>').insertAfter(g)},success:function(m){g.next(".rtcl-icon-spinner").remove(),m.success?(a.reset(),e.find("#rtcl-report-abuse-message-display").removeClass("text-danger").addClass("text-success").html(m.data.message),setTimeout(function(){e.parents("#rtcl-report-abuse-modal").removeClass("show")},1500)):e.find("#rtcl-report-abuse-message-display").removeClass("text-success").addClass("text-danger").html(m.data.error),rtcl.recaptcha&&rtcl.recaptcha.v===2&&e.data("reCaptchaId")!==void 0&&grecaptcha.reset(e.data("reCaptchaId"))},error:function(m){t("#rtcl-report-abuse-message-display").removeClass("text-success").addClass("text-danger").html(m),g.next(".rtcl-icon-spinner").remove()}})}}})}),t("form.rtcl-contact-form, form#rtcl-contact-form").each(function(){t(this).validate({submitHandler:function(a){const e=t(a),l=e.find("#rtcl-contact-message-display"),i=e.data("reCaptchaId");if(rtcl.recaptcha&&typeof grecaptcha<"u"&&rtcl.recaptcha.on&&t.inArray("contact",rtcl.recaptcha.on)!==-1){if(rtcl.recaptcha.v===2&&i!==void 0){var o=grecaptcha.getResponse(i);return l.html(""),o.length===0?(l.removeClass("text-success").addClass("text-danger").html(rtcl.recaptcha.msg.invalid),grecaptcha.reset(i),!1):(g(o),!1)}else if(rtcl.recaptcha.v===3)return grecaptcha.ready(function(){e.rtclBlock(),grecaptcha.execute(rtcl.recaptcha.site_key,{action:"contact"}).then(function(m){e.rtclUnblock(),g(m)})}),!1}return g(),!1;function g(m){const w=new FormData(a);m&&w.append("g-recaptcha-response",m),w.append("action","rtcl_public_send_contact_email"),w.append("post_id",rtcl.post_id||0),w.append("__rtcl_wpnonce",rtcl.__rtcl_wpnonce),t.ajax({url:rtcl.ajaxurl,type:"POST",dataType:"json",cache:!1,processData:!1,contentType:!1,data:w,beforeSend:function(){e.rtclBlock(),l.removeClass("d-block").html(""),t('<span class="rtcl-icon-spinner animate-spin"></span>').insertAfter(e.find(".btn"))},success:function(v){e.rtclUnblock(),e.find(".btn").next(".rtcl-icon-spinner").remove(),l.addClass("d-block"),v.success?(a.reset(),l.removeClass("text-danger").addClass("d-block text-success").html(v.data.message),e.parent().data("hide")!==0&&setTimeout(function(){e.slideUp()},800)):l.removeClass("text-success").addClass("d-block text-danger").html(v.data.error),rtcl.recaptcha&&rtcl.recaptcha.v===2&&i!==void 0&&grecaptcha.reset(i)},error:function(v){e.rtclUnblock(),l.removeClass("text-success").addClass("d-block text-danger").html(v),e.find(".btn").next(".rtcl-icon-spinner").remove()}})}}})}),t("#rtcl-user-account").validate({submitHandler:function(a){const e=t(a),l=e.find("input[type=submit]"),i=e.find(".rtcl-response"),o=t("<div class='alert'></div>"),g=new FormData(a);g.append("action","rtcl_update_user_account"),g.append("__rtcl_wpnonce",rtcl.__rtcl_wpnonce),t.ajax({url:rtcl.ajaxurl,data:g,dataType:"json",cache:!1,processData:!1,contentType:!1,type:"POST",beforeSend:function(){e.addClass("rtcl-loading"),l.prop("disabled",!0),i.html(""),t('<span class="rtcl-icon-spinner animate-spin"></span>').insertAfter(l)},success:function(m){l.prop("disabled",!1).next(".rtcl-icon-spinner").remove(),e.removeClass("rtcl-loading"),m.success?(e.find("input[name=pass1]").val(""),e.find("input[name=pass2]").val(""),o.removeClass("alert-danger").addClass("alert-success").html(m.data.message).appendTo(i),setTimeout(function(){i.html("")},1e3)):o.removeClass("alert-success").addClass("alert-danger").html(m.data.error).appendTo(i)},error:function(m){o.removeClass("alert-success").addClass("alert-danger").html(m.responseText).appendTo(i),l.prop("disabled",!1).next(".rtcl-icon-spinner").remove(),e.removeClass("rtcl-loading")}})}})),window.rtclInitDateField=function(){t.fn.daterangepicker&&t(".rtcl-date").each(function(){let a=t(this),e=a.data("options")||{};if(e=rtclFilter.apply("dateRangePickerOptions",e),Array.isArray(e.invalidDateList)&&e.invalidDateList.length){const l=e.invalidDateList.map(i=>moment(i).format(e.locale.format));e.isInvalidDate=function(i){return l.includes(i.format(e.locale.format))}}t(this).daterangepicker(e),e.autoUpdateInput===!1&&(a.on("apply.daterangepicker",function(l,i){i.singleDatePicker?t(this).val(i.startDate.format(i.locale.format)):t(this).val(i.startDate.format(i.locale.format)+i.locale.separator+i.endDate.format(i.locale.format))}),a.on("cancel.daterangepicker",function(l,i){t(this).val("")}))})},t(function(){t(".rtcl-phone-reveal").on("click",function(){if(t(this).hasClass("revealed")){var o;o=t(this).attr("href"),o&&(window.location.href=o)}if(t(this).hasClass("not-revealed")){t(this).removeClass("not-revealed").addClass("revealed");var g=t(this).data("phone");t(this).find("span").text(g)}return!1});var a=t(".rtcl-user-ad-listing-wrapper"),e;if(a.length){var l=t(".rtcl-listing-wrapper",a);e=l.data("pagination")||{},e.disable=!1,e.loading=!1,t(window).on("scroll load",function(){i(l)})}function i(o){var g=a.offset().top+a.outerHeight(!0),m=t(window).scrollTop()+t(window).height();if(g<=m&&g+t(window).height()>m&&e.max_num_pages>e.current_page&&!e.loading&&!e.disable){var w={action:"rtcl_user_ad_load_more",current_page:e.current_page,max_num_pages:e.max_num_pages,found_posts:e.found_posts,posts_per_page:e.posts_per_page,user_id:rtcl.user_id};t.ajax({url:rtcl.ajaxurl,data:w,type:"POST",beforeSend:function(){e.loading=!0,t('<span class="rtcl-icon-spinner animate-spin"></span>').insertAfter(o)},success:function(v){o.next(".rtcl-icon-spinner").remove(),e.loading=!1,e.current_page=v.current_page,e.max_num_pages===v.current_page&&(e.disable=!0),v.complete&&v.html&&o.append(v.html)},error:function(v){e.loading=!1,o.next(".rtcl-icon-spinner").remove()}})}}});const c=new L;t(document).ready(()=>{c.init()}),t(window).on("resize load",s).on("load",function(){t(".rtcl-range-slider-input").on("input",function(){t(this).parent().find("span.rtcl-range-value").text(this.value)})}),t(document).on("rtcl.favorite",function(a,e){var l=t(".rt-el-header-favourite-count").first(),i=t(".rt-el-header-favourite-count"),o=parseInt(l.text(),10);o=isNaN(o)?0:o,e.action==="added"?(o++,i.text(o)):e.action==="removed"&&(o--,i.text(o))}),t(document).on("rtcl.compare.added",function(a,e){t(".rtcl-el-compare-count").text(e.current_listings)}),t(document).on("rtcl.compare.removed",function(a,e){t(".rtcl-el-compare-count").text(e.current_listings)}),t(document).on("click",".rtcl-compare-btn-clear",function(){t(".rtcl-el-compare-count").text("0")}),t(window).on("load",function(){t(".builder-content").removeClass("content-invisible")});function u(a,e,l,i){var o=t(".rtcl-checkout-content"),g=o.find("#rtcl-checkout-form"),m=g.find("#rtcl-payment-overview"),w=g.find("input[name='type']").val(),v=g.find("input[name='pricing_id']:checked").val(),d="";t.ajax({type:"POST",url:rtcl.ajaxurl,data:{action:"rtcl_calculate_checkout_tax",country_code:a,state_code:e,postcode:l,city:i,type:w,pricing_id:v,__rtcl_wpnonce:rtcl.__rtcl_wpnonce},beforeSend:function(){o.rtclBlock()},success:function(n){if(o.rtclUnblock(),!n.error){const h=n.hasOwnProperty("available_tax")?n.available_tax:[];m.find(".cart-subtotal .checkout-price").text(n.pricing_price),m.find(".order-total .checkout-price").text(n.total_amount),Array.isArray(h)&&(m.find("tr.tax-rate td").html(""),t.each(h,function(p,_){if(d+='<span class="price-amount">',d+='<span class="checkout-price-currency-symbol">'+rtcl.payment_currency_symbol+"</span>",d+='<span class="checkout-price">'+_.amount+"</span>",d+='<span class="checkout-tax-label">('+_.label+")</span>",d+="</span>",!n.enable_multiple_tax)return!1}),m.find("tr.tax-rate td").append(d))}},error:function(n,h){o.rtclUnblock()}})}jQuery(document).ready(function(a){var e=a(".rtcl-is-collapsable");e.length&&e.each(function(){a(this).find(".rtcl-cfp-repeater-item").each(function(l){console.log(a(this));var i=a(this),o=i.find("> .rtcl-cfp-repeater-field");if(o.length){var g=o.first(),m=o.slice(1),w=a('<div class="rtcl-repeater-content"></div>');m.appendTo(w),i.append(w),g.css("cursor","pointer"),g.addClass("item-heading item-"+l),l===0?(w.show(),i.addClass("open")):w.hide(),g.on("click",function(){w.slideToggle(200),i.toggleClass("open")})}})})})})(jQuery);
