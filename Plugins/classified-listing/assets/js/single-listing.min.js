!function(i){var t=function(t,e){var s;this.$sliderWrapper=t,this.$slider=i(".rtcl-slider",this.$sliderWrapper),this.$sliderThumbs=i(".rtcl-slider-nav",this.$sliderWrapper),this.$slider.length&&(this.slider=this.$slider.get(0),this.swiperSlider=this.slider.swiper||null,this.sliderThumbs=this.$sliderThumbs.get(0),this.swiperThumbsSlider=(null==this||null===(s=this.sliderThumbs)||void 0===s?void 0:s.swiper)||null,this.$slider_images=i(".rtcl-slider-item",this.$slider),this.settings=Object.assign({},rtcl_single_listing_localized_params||{},this.$sliderWrapper.data("options")||{}),this.args=e||{},this.options=Object.assign({},this.args,this.settings.slider_options,this.$sliderWrapper.data("options")||{}),this.options.rtl&&"rtl"===i("html").attr("dir")&&(this.options.rtl=!0),this.slider_enabled="function"==typeof Swiper&&this.settings.slider_enabled,this.zoom_enabled=i.isFunction(i.fn.zoom)&&this.settings.zoom_enabled,this.photoswipe_enabled="undefined"!=typeof PhotoSwipe&&this.settings.photoswipe_enabled,e&&(this.slider_enabled=!1!==e.slider_enabled&&this.slider_enabled,this.zoom_enabled=!1!==e.zoom_enabled&&this.zoom_enabled,this.photoswipe_enabled=!1!==e.photoswipe_enabled&&this.photoswipe_enabled),1===this.$slider_images.length&&(this.slider_enabled=!1),this.initSlider=function(){if(this.slider_enabled){var t=this.$slider,e=this.$sliderThumbs,s=this.$sliderThumbs.data("slider-options")||{};this.options.rtl&&(t.attr("dir","rtl"),e.attr("dir","rtl"));var r,l,n,a=this;if(this.swiperThumbsSlider)r=this.swiperThumbsSlider,this.swiperThumbsSlider.update();else r=new Swiper(this.sliderThumbs,{watchSlidesVisibility:!0,spaceBetween:(null==s?void 0:s.spaceBetween)||5,slidesPerView:5,navigation:{nextEl:e.find(".swiper-button-next").get(0),prevEl:e.find(".swiper-button-prev").get(0)},direction:s.direction||"horizontal",breakpoints:{0:{slidesPerView:3},576:{slidesPerView:4},768:{allowTouchMove:!0},1024:{allowTouchMove:(null===(l=rtcl_single_listing_localized_params.slider_options)||void 0===l||null===(l=l.nav)||void 0===l?void 0:l.allowTouchMove.l)||!1}}}),this.swiperThumbsSlider=r,r.slides.forEach(function(i,t){i.addEventListener("click",function(){a.swiperSlider&&a.swiperSlider.slideTo(t),a.$sliderWrapper.trigger("rtcl_thumbnail_clicked",[t,i])})});var o={navigation:{nextEl:t.find(".swiper-button-next").get(0),prevEl:t.find(".swiper-button-prev").get(0)},on:{init:function(i){i.slides[i.activeIndex].querySelector("iframe")&&i.el.classList.add("active-video-slider")}}};this.$sliderThumbs.length&&(o.thumbs={swiper:r});var d=Object.assign({},o,this.options);this.swiperSlider?(n=this.swiperSlider,this.swiperSlider.parents=d,this.swiperSlider.update()):(n=new Swiper(this.slider,d),this.swiperSlider=n),n.on("init slideChange",function(t){a.initZoomForTarget(n.activeIndex);var e=n.activeIndex;n.slides.forEach(function(t,s){var r=i(t).find("iframe");r.length&&(s===e?r.each(function(){var t=i(this).attr("data-src"),e=i(this).attr("src");!t&&e&&i(this).attr("data-src",e),e&&e===t||i(this).attr("src",t)}):r.each(function(){var t=i(this).attr("data-src"),e=i(this).attr("src");i(this).attr("src",""),e&&!t&&i(this).attr("data-src",e)}))}),t.slides[t.activeIndex].querySelector("iframe")?t.el.classList.add("active-video-slider"):t.el.classList.remove("active-video-slider")})}},this.imagesLoaded=function(){var t=this;if(i.fn.imagesLoaded.done)return this.$sliderWrapper.trigger("rtcl_gallery_loading",this),void this.$sliderWrapper.trigger("rtcl_gallery_loaded",this);this.$sliderWrapper.imagesLoaded().progress(function(i,e){t.$sliderWrapper.trigger("rtcl_gallery_loading",[t])}).done(function(i){t.$sliderWrapper.trigger("rtcl_gallery_loaded",[t])})},this.initZoom=function(){this.zoom_enabled&&this.initZoomForTarget(0)},this.initZoomForTarget=function(t){if(this.zoom_enabled){var e=this.$slider.width(),s=!1,r=this.$slider_images.eq(t);if(i(r).each(function(t,r){var l=i(r).find("img");if(parseInt(l.data("large_image_width"))>e)return s=!0,!1}),s){var l=i.extend({touch:!1},this.settings.zoom_options);"ontouchstart"in document.documentElement&&(l.on="click"),r.trigger("zoom.destroy"),r.zoom(l),this.$sliderWrapper.on("rtcl_gallery_init_zoom",this.initZoom)}}},this.initPhotoswipe=function(){this.photoswipe_enabled&&(this.$slider.prepend('<a href="#" class="rtcl-listing-gallery__trigger"><i class="rtcl-icon-search"></i></i> </a>'),this.$slider.on("click",".rtcl-listing-gallery__trigger",this.openPhotoswipe.bind(this)))},this.getGalleryItems=function(){var t=this.$slider_images,e=[];return t.length>0&&t.each(function(t,s){var r=i(s).find("img");if(r.length){var l={src:r.attr("data-large_image"),w:r.attr("data-large_image_width"),h:r.attr("data-large_image_height"),title:r.attr("data-caption")?r.attr("data-caption"):r.attr("title")};e.push(l)}}),e},this.openPhotoswipe=function(t){t.preventDefault();var e,s=i(".pswp")[0],r=this.getGalleryItems(),l=i(t.target);e=i(t.currentTarget).hasClass("rtcl-listing-gallery__trigger")||i(t.currentTarget).closest(".rtcl-listing-gallery__trigger")||l.is(".rtcl-listing-gallery__trigger")||l.is(".rtcl-listing-gallery__trigger img")?this.$slider.find(".swiper-slide.swiper-slide-active"):l.closest(".rtcl-slider-item");var n=i.extend({index:i(e).index()},this.settings.photoswipe_options);new PhotoSwipe(s,PhotoSwipeUI_Default,r,n).init()},this.start=function(){var i=this;this.init(),this.$sliderWrapper.on("rtcl_gallery_loaded",this.init.bind(this)),setTimeout(function(){i.imagesLoaded()},1)},this.init=function(){this.initSlider(),this.initZoom(),this.initPhotoswipe()},this.start())};i.fn.rtcl_listing_gallery=function(i){return new t(this,i),this},i(document).ready(function(){i(".rtcl-slider-wrapper").each(function(){i(this).rtcl_listing_gallery()}),i(".rtcl-sl-section-columns").each(function(){var t=!1;i(this).find(".rtcl-sl-element-wrap").each(function(){if(""!==i(this).text().trim()||i(this).children().length>0)return t=!0,!1}),t||i(this).closest(".rtcl-sl-section").hide()}),i(".rtcl-slf-repeater-item").each(function(){1==i(this).children().length?i(this).addClass("has-one-item"):i(this).addClass("has-multiple-items")}),i(".rtcl-sl-section").each(function(){var t=i(this),e=t.find(".rtcl-sl-section-columns > .rtcl-sl-section-column"),s=!0;e.each(function(){var t=i(this),e=t.text().trim().length>0,r=t.find("img, video, iframe").length>0,l=t.find(".has-no-value").length>0;if(e||r||!l)return s=!1,!1}),s&&t.hide()})}),jQuery(document).ready(function(i){var t=i(".rtcl-is-collapsable");t.length&&t.each(function(){i(this).find(".rtcl-slf-repeater-item").each(function(t){var e=i(this),s=e.find("> .rtcl-slf-repeater-field");if(s.length){var r=s.first(),l=s.slice(1),n=i('<div class="rtcl-repeater-content"></div>');l.appendTo(n),e.append(n),r.css("cursor","pointer"),r.addClass("item-heading item-"+t),0===t?(n.show(),e.addClass("open")):n.hide(),r.on("click",function(){n.slideToggle(200),e.toggleClass("open")})}})})})}(jQuery);
